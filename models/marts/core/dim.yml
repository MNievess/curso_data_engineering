version: 2

models:

    - name: dim_shipping
      description: "Dimensión que relaciona la empresa de paquetería con el ID_tracking"

      columns:
        - name: shipping_id
          data_type: varchar
          description: "ID numérico que identifica a cada servicio de envío"
          tests:
            - not_null
            - unique
            - relationships:
                to: ref('stg_sql_server_dbo_orders')
                field: tracking_id

        - name: shipping_service
          data_type: varchar
          description: "Nombre de la empresa de transportes"
          tests:
          - not_null
      
        - name: _fivetran_deleted
          data_type: boolean
          description: ""
          tests:
            - not_null
                
        - name: date_load
          data_type: timestamp_tz
          description: "Fecha y hora de la ingesta de datos"
          tests:
            - not_null

    - name: dim_promos
      description: "Dimensión que indica la promoción que ésta siendo aplicada a cada order"

      columns:
        - name: promo_id
          data_type: varchar
          description: "Clave primaria"
          tests:
            - not_null
            - unique
            - relationships:
                to: ref('stg_sql_server_dbo_orders')
                field: tracking_id
        
        - name: promo_name
          data_type: varchar
          description: "Nombre de la promoción"
          tests:
            - not_null
     
        - name: discount_usd
          data_type: number
          description: "Descuento de cada promoción, en dólares"
          tests:
            - not_null
                
        - name: promo_status
          data_type: varchar
          description: "Estado de la promoción activo o inactivo"
          tests:
            - not_null
            - accepted_values:
                values: ['inactive','active']

        - name: _fivetran_deleted
          data_type: boolean
          description: ""

        - name: date_load
          data_type: timestamp_tz
          description: ""
    

                